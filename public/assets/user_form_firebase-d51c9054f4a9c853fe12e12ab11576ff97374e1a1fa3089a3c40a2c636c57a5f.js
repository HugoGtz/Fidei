function curpValida(a){function e(a){for(var e="0123456789ABCDEFGHIJKLMN\xd1OPQRSTUVWXYZ",t=0,n=0,o=0;o<17;o++)t+=e.indexOf(a.charAt(o))*(18-o);return n=10-t%10,10==n?0:n}var t=/^([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\d])(\d)$/,n=a.match(t);return!!n&&n[2]==e(n[1])}function validarInput(a){var e=a.toUpperCase();document.getElementById("resultado");return!!curpValida(e)}document.addEventListener("turbolinks:load",function(){$(".next-form").on("click",function(){switch($(this).attr("alt")){case"1":$(".1").fadeOut("fast"),$(".2").fadeIn("slow");break;case"2":$(".2").fadeOut("fast"),$(".3").fadeIn("slow")}}),$(".atras").on("click",function(){switch($(this).attr("alt")){case"3":$(".3").fadeOut("fast"),$(".2").fadeIn("slow");break;case"2":$(".2").fadeOut("fast"),$(".1").fadeIn("slow")}})});var dataUser=function(){var a,e,t=$("#id_user").val(),n=$("#nombre").val(),o=$("#apellidoP").val(),r=$("#apellidoM").val(),l=$("#CURP").val(),i=$("#RFC").val(),c=$("#FechaA\xf1o").val(),d=$("#FechaMes").val(),s=$("#FechaDia").val(),u=$("#Ide").val(),f=$("#Identificacion").val(),v=$("#Estado").val(),C=$("#Ciudad").val(),h=$("#Calle").val(),p=$("#Colonia").val(),F=$("#CP").val(),b=$("#TF").val(),I=$("#TM").val(),m=c+"-"+d+"-"+s,A=$("#CB").val(),B=$("#B1").val(),T=$("#B2").val();a="true"==$("input:checkbox[name=t1]:checked").val(),e="true"==$("input:checkbox[name=c1]:checked").val();var w=/[0-9]{10}/;if(w.test(b)&&validarInput(l))return a&&e?(writeUserData(t,n,o,r,l,i,m,u,f,v,C,h,p,F,b,I,A,B,T),swal("Buen Trabajo!","Bienvenido a Fidei","success"),!0):(alert("Aun no has Aceptado terminos y condiciones o el contrato."),!1);swal("Algun dato no esta correcto porfavor verifique los telefonos, curp, cuenta interbancaria o RFC")},writeUserData=function(a,e,t,n,o,r,l,i,c,d,s,u,f,v,C,h,p,F,b){firebase.auth().onAuthStateChanged(function(a){firebase.database().ref("users/"+a.uid).set({nombre:e,apellidoP:t,apellidoM:n,CURP:o,RFC:r,Fecha:l,Ide:i,Identificacion:c,Estado:d,Ciudad:s,Colonia:f,Calle:u,CP:v,TF:C,TM:h,CB:p,B1:F,B2:b}).then(function(){$.ajax({type:"GET",url:"/user_form_firebase/changeFormStatus"})})["catch"](function(){return!1})})};