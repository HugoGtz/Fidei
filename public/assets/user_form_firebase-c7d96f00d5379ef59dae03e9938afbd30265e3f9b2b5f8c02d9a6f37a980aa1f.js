function curpValida(a){function e(a){for(var e="0123456789ABCDEFGHIJKLMN\xd1OPQRSTUVWXYZ",t=0,n=0,o=0;o<17;o++)t+=e.indexOf(a.charAt(o))*(18-o);return n=10-t%10,10==n?0:n}var t=/^([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\d])(\d)$/,n=a.match(t);return!!n&&n[2]==e(n[1])}function validarInput(a){var e=a.toUpperCase();document.getElementById("resultado");return!!curpValida(e)}document.addEventListener("turbolinks:load",function(){$(".next-form").on("click",function(){switch($(this).attr("alt")){case"1":$(".1").fadeOut("fast"),$(".2").fadeIn("slow");break;case"2":$(".2").fadeOut("fast"),$(".3").fadeIn("slow")}}),$(".atras").on("click",function(){switch($(this).attr("alt")){case"3":$(".3").fadeOut("fast"),$(".2").fadeIn("slow");break;case"2":$(".2").fadeOut("fast"),$(".1").fadeIn("slow")}})});var dataUser=function(){var a,e,t=$("#id_user").val(),n=$("#nombre").val(),o=$("#apellidoP").val(),i=$("#apellidoM").val(),l=$("#CURP").val(),r=$("#RFC").val(),s=$("#FechaA\xf1o").val(),c=$("#FechaMes").val(),d=$("#FechaDia").val(),u=$("#Ide").val(),f=$("#Identificacion").val(),v=$("#Estado").val(),C=$("#Ciudad").val(),h=$("#Calle").val(),p=$("#Colonia").val(),m=$("#CP").val(),A=$("#TF").val(),I=$("#TM").val(),b=s+"-"+c+"-"+d,F=$("#CB").val(),P=$("#B1").val(),T=$("#B2").val();a="true"==$("input:checkbox[name=t1]:checked").val(),e="true"==$("input:checkbox[name=c1]:checked").val();var B=/[A-Za-z]/,w=/[0-9]/,S=/[A-Za-z0-9]/,E=/[0-9]{10}/,M="";if(0==B.test(n)&&(M+="Nombre \n"),0==B.test(o)&&(M+=" Apellido Paterno \n"),0==B.test(i)&&(M+=" Apellido Materno \n"),0==S.test(u)&&(M+=" Num Identificacion \n"),0==B.test(v)&&(M+=" Estado \n"),0==B.test(C)&&(M+=" Ciudad \n"),0==B.test(p)&&(M+=" Colonia \n"),0==w.test(m)&&(M+=" Codigo Postal \n"),0==validarInput(l)&&(M+=" CURP \n"),0==E.test(A)&&(M+=" Num Telefono 1 \n"),""==M)return a&&e?(writeUserData(t,n,o,i,l,r,b,u,f,v,C,h,p,m,A,I,F,P,T),swal("Buen Trabajo!","Bienvenido a Fidei","success"),!0):(alert("Aun no has Aceptado terminos y condiciones o el contrato."),!1);swal("Error","Verfique que los siguientes datos sean correctos o no falten: \n "+M+" Sean Correctos","warning")},writeUserData=function(a,e,t,n,o,i,l,r,s,c,d,u,f,v,C,h,p,m,A){firebase.auth().onAuthStateChanged(function(a){firebase.database().ref("users/"+a.uid).set({nombre:e,apellidoP:t,apellidoM:n,CURP:o,RFC:i,Fecha:l,Ide:r,Identificacion:s,Estado:c,Ciudad:d,Colonia:f,Calle:u,CP:v,TF:C,TM:h,CB:p,B1:m,B2:A}).then(function(){$.ajax({type:"GET",url:"/user_form_firebase/changeFormStatus"})})["catch"](function(){return!1})})};